\hypertarget{kilobot_8h_source}{}\doxysection{/\+Users/peterjanku/\+Sources\+Cpp/\+Kilobot\+Arena/kilobot.h}
\mbox{\hyperlink{kilobot_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Kilobot.h}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ *  Created on: 16 Sep 2016}}
\DoxyCodeLine{5 \textcolor{comment}{ *      Author: marshall}}
\DoxyCodeLine{6 \textcolor{comment}{ */}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef KILOBOT\_H\_}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define KILOBOT\_H\_}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <QPointF>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <QVector>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{enum} \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{lightColour}} \{}
\DoxyCodeLine{16     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283aac132f2982b98bcaa3445e535a03ff75}{OFF}},}
\DoxyCodeLine{17     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283af80f9a890089d211842d59625e561f88}{RED}},}
\DoxyCodeLine{18     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283aa60bd322f93178d68184e30e162571ca}{GREEN}},}
\DoxyCodeLine{19     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283a35d6719cb4d7577c031b3d79057a1b79}{BLUE}}}
\DoxyCodeLine{20 \};}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{typedef} uint16\_t \mbox{\hyperlink{kilobot_8h_aef2863aa72a857dc635deef586ffe05f}{kilobot\_id}};}
\DoxyCodeLine{23 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{kilobot_8h_a0c86ee1121b58b61e06863a6ec21c049}{kilobot\_channel\_colour}};}
\DoxyCodeLine{24 \textcolor{comment}{//typedef unsigned char kilobot\_message\_type;}}
\DoxyCodeLine{25 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{26         uint8\_t \mbox{\hyperlink{structkilobot__message_a17949432486aea00aa0884782777da17}{type}} :4;}
\DoxyCodeLine{27         \mbox{\hyperlink{kilobot_8h_aef2863aa72a857dc635deef586ffe05f}{kilobot\_id}} \mbox{\hyperlink{structkilobot__message_a718c844d11120fb4f498c82185a9251f}{id}} :10;}
\DoxyCodeLine{28         uint16\_t \mbox{\hyperlink{structkilobot__message_ae4ec53d0498416ad00fedde72d1999c9}{data}} :10;}
\DoxyCodeLine{29 \} \mbox{\hyperlink{structkilobot__message}{kilobot\_message}};}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{keyword}{struct }\mbox{\hyperlink{structkilobot__broadcast}{kilobot\_broadcast}} \{}
\DoxyCodeLine{32         uint8\_t \mbox{\hyperlink{structkilobot__broadcast_a617f65e5e41f6d52ca9f2d739c2cf707}{type}};}
\DoxyCodeLine{33         QVector < uint8\_t > \mbox{\hyperlink{structkilobot__broadcast_ad65eb4f5ba937a5a54db7fb1b3d5c3ea}{data}};}
\DoxyCodeLine{34 \};}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define uint8\_t\_LENGTH 10 }\textcolor{comment}{// in bits}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#define KILOBOT\_MESSAGE\_TYPE\_LENGTH 4 }\textcolor{comment}{// in bits}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#define KILOBOT\_MESSAGE\_DATA\_LENGTH 10 }\textcolor{comment}{// in bits}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define KILOBOT\_MAX\_COLOUR 255 }\textcolor{comment}{// colour channel}}
\DoxyCodeLine{40 \textcolor{preprocessor}{\#define KILOBOT\_REFRESH\_DELAY 3 }\textcolor{comment}{// in milliseconds}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define KILOBOT\_MAX\_ID 1024 }\textcolor{comment}{//}}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \textcolor{preprocessor}{\#define UNASSIGNED\_ID INT16\_MAX}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{comment}{/*enum tracking\_type \{}}
\DoxyCodeLine{47 \textcolor{comment}{    POS\_ONLY,}}
\DoxyCodeLine{48 \textcolor{comment}{    LED\_ONLY,}}
\DoxyCodeLine{49 \textcolor{comment}{    ADAPTIVE\_LED\_ONLY,}}
\DoxyCodeLine{50 \textcolor{comment}{    POS\_LED,}}
\DoxyCodeLine{51 \textcolor{comment}{    POS\_ADAPTIVE\_LED,}}
\DoxyCodeLine{52 \textcolor{comment}{\};*/}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keyword}{enum} \mbox{\hyperlink{kilobot_8h_a8810be9e45f032edb9314e71674e829b}{tracking\_flags}} \{}
\DoxyCodeLine{55     \mbox{\hyperlink{kilobot_8h_a8810be9e45f032edb9314e71674e829ba91743bc3932693c4b8a6ca984e8a8437}{POS}} = 1 << 0,}
\DoxyCodeLine{56     \mbox{\hyperlink{kilobot_8h_a8810be9e45f032edb9314e71674e829ba21447137d62c46e603b924d455e8cd12}{LED}} = 1 << 1,}
\DoxyCodeLine{57     \mbox{\hyperlink{kilobot_8h_a8810be9e45f032edb9314e71674e829ba2f6f259dba1a383748771becb45639ef}{ADAPTIVE\_LED}} = 1 << 2,}
\DoxyCodeLine{58     \mbox{\hyperlink{kilobot_8h_a8810be9e45f032edb9314e71674e829ba59b0dd0d260e722b287c37c6099128b8}{ROT}} = 1 << 3}
\DoxyCodeLine{59 \};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{preprocessor}{\#include <QObject>}}
\DoxyCodeLine{63 }
\DoxyCodeLine{64 \textcolor{comment}{/*struct kilobot\_colour}}
\DoxyCodeLine{65 \textcolor{comment}{\{}}
\DoxyCodeLine{66 \textcolor{comment}{    kilobot\_channel\_colour r;}}
\DoxyCodeLine{67 \textcolor{comment}{    kilobot\_channel\_colour g;}}
\DoxyCodeLine{68 \textcolor{comment}{    kilobot\_channel\_colour b;}}
\DoxyCodeLine{69 \textcolor{comment}{\};*/}}
\DoxyCodeLine{70 \textcolor{keyword}{typedef} \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{lightColour}} \mbox{\hyperlink{kilobot_8h_a9a7433df9379dc7c271b4136437ec6e5}{kilobot\_colour}};}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \textcolor{keyword}{class }\mbox{\hyperlink{class_colour_buffer}{ColourBuffer}}\{}
\DoxyCodeLine{74 \textcolor{keyword}{public}:}
\DoxyCodeLine{75     \mbox{\hyperlink{class_colour_buffer_a70b6e7ed4d534b2e3a721f523bfe8565}{ColourBuffer}}() : \mbox{\hyperlink{class_colour_buffer}{ColourBuffer}}(1) \{\}}
\DoxyCodeLine{76     \mbox{\hyperlink{class_colour_buffer_aa93d9a37d179b8d9e022659838b1dedf}{\string~ColourBuffer}}() \{\}}
\DoxyCodeLine{77     \mbox{\hyperlink{class_colour_buffer_a70b6e7ed4d534b2e3a721f523bfe8565}{ColourBuffer}}(\textcolor{keywordtype}{int} size);}
\DoxyCodeLine{78     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_colour_buffer_adfa7536072cd42363ff582230de535ad}{addColour}}(\mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{lightColour}} newColour);}
\DoxyCodeLine{79     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{lightColour}} \mbox{\hyperlink{class_colour_buffer_af89ec6033ceab9f8698828ecba943443}{getAvgColour}}();}
\DoxyCodeLine{80     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{lightColour}} \mbox{\hyperlink{class_colour_buffer_a1cc83825588418b4b9465951045075b1}{getLastColour}}() \{\textcolor{keywordflow}{return} buffer.at(buffer.size()-\/1);\}}
\DoxyCodeLine{81 }
\DoxyCodeLine{82 \textcolor{keyword}{private}:}
\DoxyCodeLine{83     \textcolor{keywordtype}{int} buffer\_size;}
\DoxyCodeLine{84     QVector < lightColour > buffer;}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \};}
\DoxyCodeLine{87 }
\DoxyCodeLine{88 \textcolor{keyword}{class }\mbox{\hyperlink{class_orientation_buffer}{OrientationBuffer}}\{}
\DoxyCodeLine{89 \textcolor{keyword}{public}:}
\DoxyCodeLine{90     \mbox{\hyperlink{class_orientation_buffer_aa3c36cb4e1e9213bbbf612a47b87edec}{OrientationBuffer}}() : \mbox{\hyperlink{class_orientation_buffer}{OrientationBuffer}}(1) \{\}}
\DoxyCodeLine{91     \mbox{\hyperlink{class_orientation_buffer_ae0a06fde70be4c2cea7a917c6cabe3eb}{\string~OrientationBuffer}}() \{\}}
\DoxyCodeLine{92     \mbox{\hyperlink{class_orientation_buffer_a2c18b0cb109abfd6f4b8b98c43b53ffe}{OrientationBuffer}}(\textcolor{keywordtype}{int} size) : buffer\_size(size) \{\}}
\DoxyCodeLine{93     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_orientation_buffer_aea03fb41b85aebbfbefae0c473933df6}{addOrientation}}(QPointF newOrientation);}
\DoxyCodeLine{94     QPointF \mbox{\hyperlink{class_orientation_buffer_aff243aa079ec35296512eadb5081a4be}{getAvgOrientation}}();}
\DoxyCodeLine{95     QPointF \mbox{\hyperlink{class_orientation_buffer_a3d6c63f5bb17287d59242d7f5efb9b1f}{getLastOrientation}}() \{\textcolor{keywordflow}{return} buffer.at(buffer.size()-\/1);\}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97 \textcolor{keyword}{private}:}
\DoxyCodeLine{98     \textcolor{keywordtype}{int} buffer\_size;}
\DoxyCodeLine{99     QVector < QPointF > buffer;}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \};}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 \textcolor{keyword}{class }\mbox{\hyperlink{class_position_buffer}{PositionBuffer}}\{}
\DoxyCodeLine{104 \textcolor{keyword}{public}:}
\DoxyCodeLine{105     \mbox{\hyperlink{class_position_buffer_af72990572c9e500da013f9946e0c4a52}{PositionBuffer}}() : \mbox{\hyperlink{class_position_buffer}{PositionBuffer}}(1) \{\}}
\DoxyCodeLine{106     \mbox{\hyperlink{class_position_buffer_a0ee0ea039065bfa10bca1a6506ca1962}{\string~PositionBuffer}}() \{\}}
\DoxyCodeLine{107     \mbox{\hyperlink{class_position_buffer_ad7249c772e16b0e770fc66ddf9e79525}{PositionBuffer}}(\textcolor{keywordtype}{int} size) : buffer\_size(size) \{\}}
\DoxyCodeLine{108     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_position_buffer_a4d1d3f0c73833b52d75568f93e9584c8}{addPosition}}(QPointF newPosition);}
\DoxyCodeLine{109     QPointF \mbox{\hyperlink{class_position_buffer_acfc211fb3425ba28e973cc43f3fd6743}{getOrientationFromPositions}}();}
\DoxyCodeLine{110     QPointF \mbox{\hyperlink{class_position_buffer_a573a8204b4a0129cd1d9ada969d991c4}{getLastPosition}}() \{\textcolor{keywordflow}{return} buffer.at(buffer.size()-\/1);\}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112 \textcolor{keyword}{private}:}
\DoxyCodeLine{113     \textcolor{keywordtype}{int} buffer\_size;}
\DoxyCodeLine{114     QVector < QPointF > buffer;}
\DoxyCodeLine{115 }
\DoxyCodeLine{116 \};}
\DoxyCodeLine{117 }
\DoxyCodeLine{118 \textcolor{keyword}{class }\mbox{\hyperlink{class_kilobot}{Kilobot}} : \textcolor{keyword}{public} QObject \{}
\DoxyCodeLine{119     Q\_OBJECT}
\DoxyCodeLine{120 \textcolor{keyword}{public}:}
\DoxyCodeLine{121     \mbox{\hyperlink{class_kilobot_ae81b23e309de92ac3980282bb47484b8}{Kilobot}}(\mbox{\hyperlink{kilobot_8h_aef2863aa72a857dc635deef586ffe05f}{kilobot\_id}} identifier, QPointF position, QPointF velocity, \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{kilobot\_colour}} colourValues);}
\DoxyCodeLine{122     \mbox{\hyperlink{class_kilobot_ae81b23e309de92ac3980282bb47484b8}{Kilobot}}() \{\}}
\DoxyCodeLine{123     \mbox{\hyperlink{class_kilobot_ae7d78bd9c705039d419f1fbcf8b44465}{\string~Kilobot}}();}
\DoxyCodeLine{124     \textcolor{comment}{// copy constructor}}
\DoxyCodeLine{125     \mbox{\hyperlink{class_kilobot_ae81b23e309de92ac3980282bb47484b8}{Kilobot}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_kilobot}{Kilobot}}\& other);}
\DoxyCodeLine{126     \mbox{\hyperlink{kilobot_8h_aef2863aa72a857dc635deef586ffe05f}{kilobot\_id}} \mbox{\hyperlink{class_kilobot_a338105da2e8c82c44e272351a904b6cf}{getID}}();}
\DoxyCodeLine{127     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_kilobot_ab8469021f60c879b58bf0bb549afc84e}{setID}}(\mbox{\hyperlink{kilobot_8h_aef2863aa72a857dc635deef586ffe05f}{kilobot\_id}});}
\DoxyCodeLine{128     QPointF \mbox{\hyperlink{class_kilobot_ac0841f5c540bb6b265cf4ade7a02261a}{getPosition}}();}
\DoxyCodeLine{129     QPointF \mbox{\hyperlink{class_kilobot_ab3e523e14d8dc9c89bc3dd91fa002741}{getVelocity}}();}
\DoxyCodeLine{130     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{kilobot\_colour}} \mbox{\hyperlink{class_kilobot_a508f8dcbafaa9cf2dec6dcc2bf631c1e}{getLedColour}}();}
\DoxyCodeLine{131     \textcolor{comment}{//kilobot\_colour resolveKilobotState(stateColours);}}
\DoxyCodeLine{132     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_kilobot_ad0478f7f653de09cd20c99ed64d261c4}{updateState}}(QPointF position, QPointF velocity, \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{kilobot\_colour}} colourValues);}
\DoxyCodeLine{133 }
\DoxyCodeLine{140     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_kilobot_aaf03cead4b32ad917de63f31334fc81f}{updateHardware}}();}
\DoxyCodeLine{141 }
\DoxyCodeLine{149     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_kilobot_a67ecef49336cb57362d385006c7cab2c}{updateExperiment}}();}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_kilobot_a0f6237160baf302b82a3abce906b94e3}{lightThreshold}} = 230;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \mbox{\hyperlink{class_colour_buffer}{ColourBuffer}} \mbox{\hyperlink{class_kilobot_aedecb3ef5949f5a30ad20e4073c7819a}{colBuffer}} = \mbox{\hyperlink{class_colour_buffer}{ColourBuffer}}(5);}
\DoxyCodeLine{154     \mbox{\hyperlink{class_orientation_buffer}{OrientationBuffer}} \mbox{\hyperlink{class_kilobot_adf030f29b6d009267943b29a1f78824a}{velocityBuffer}} = \mbox{\hyperlink{class_orientation_buffer}{OrientationBuffer}}(5);}
\DoxyCodeLine{155     \mbox{\hyperlink{class_position_buffer}{PositionBuffer}} \mbox{\hyperlink{class_kilobot_aac31e6f70b8584129a9552582cf419ad}{posBuffer}} = \mbox{\hyperlink{class_position_buffer}{PositionBuffer}}(6);}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 signals:}
\DoxyCodeLine{158     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_kilobot_afa7f9eb8140ed4ce9f8bddf79f8d7ecc}{sendUpdateToHardware}}(\mbox{\hyperlink{class_kilobot}{Kilobot}});}
\DoxyCodeLine{159     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_kilobot_a54cbec5d74f4db73f8b5bb4dc3ca03da}{sendUpdateToExperiment}}(\mbox{\hyperlink{class_kilobot}{Kilobot}}*,\mbox{\hyperlink{class_kilobot}{Kilobot}});}
\DoxyCodeLine{160 }
\DoxyCodeLine{161 \textcolor{keyword}{private}:}
\DoxyCodeLine{162     \mbox{\hyperlink{kilobot_8h_aef2863aa72a857dc635deef586ffe05f}{kilobot\_id}} \textcolor{keywordtype}{id} = \mbox{\hyperlink{kilobot_8h_aa383c9176e13e7036e5a5911b7913e81}{UNASSIGNED\_ID}};}
\DoxyCodeLine{163     QPointF pos = QPointF(0,0);}
\DoxyCodeLine{164     QPointF vel = QPointF(1,1);}
\DoxyCodeLine{165     \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283}{kilobot\_colour}} col = \mbox{\hyperlink{kilobot_8h_a5ae27081b74f814ca7bfc5182aa9f283aac132f2982b98bcaa3445e535a03ff75}{OFF}};}
\DoxyCodeLine{166 }
\DoxyCodeLine{167 \};}
\DoxyCodeLine{168 }
\DoxyCodeLine{169 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// KILOBOT\_H}}

\end{DoxyCode}
